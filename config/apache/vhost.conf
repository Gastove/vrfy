<VirtualHost *:443>
  ServerName cs.reed.edu

  SSLEngine on
  SSLCertificateFile /etc/ssl/certs/cs.reed.edu.crt
  SSLCertificateKeyFile /etc/ssl/private/cs.reed.edu.key

  ErrorLog /var/log/apache2/cs.reed.edu-error.log
  CustomLog /var/log/apache2/cs.reed.edu-access.log combined
  LogLevel debug

  ProxyPass /static/ !
  ProxyPass /cosign/valid !
  Alias /static/ /home/vrfy/vrfy/static/

  Include /etc/apache2/include/cosign.conf
  CosignService cs
  CosignSiteEntry https://cs.reed.edu/
  CosignValidReference https://cs\.reed\.edu.*

  ProxyPass / http://cs.reed.edu:8000/
  ProxyPassReverse / http://cs.reed.edu:8000/

  <Location />
    CosignProtected on
    Require valid-user
    RequestHeader set REMOTE-USER "%{REMOTE_USER}s"
  </Location>

  <Location /server-debug>
    ProxyPass "!"
    SetHandler server-info
    Allow from all
    Satisfy any
  </Location>

</VirtualHost>
